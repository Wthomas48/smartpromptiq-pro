# SmartPromptIQ Pro Environment Configuration
# Copy this file to .env and update with your actual values

# =======================
# APPLICATION SETTINGS
# =======================
NODE_ENV=development
PORT=5000
FRONTEND_URL=http://localhost:5173
CLIENT_URL=http://localhost:5173
SERVER_URL=http://localhost:5000

# =======================
# DATABASE CONFIGURATION
# =======================
# SQLite database path (development)
DATABASE_URL="file:./database.sqlite"

# For PostgreSQL (production recommended):
# DATABASE_URL="postgresql://username:password@localhost:5432/smartpromptiq"
# For Neon (free PostgreSQL):
# DATABASE_URL="postgresql://user:pass@ep-cool-darkness-123456.us-east-1.aws.neon.tech/smartpromptiq?sslmode=require"

# =======================
# JWT AUTHENTICATION
# =======================
# Generate a strong secret: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
JWT_SECRET=your_super_secret_jwt_key_here_32_characters_minimum
JWT_EXPIRES_IN=7d
BCRYPT_ROUNDS=12

# =======================
# STRIPE CONFIGURATION
# =======================
# Get these from your Stripe Dashboard (https://dashboard.stripe.com/)
STRIPE_SECRET_KEY=sk_test_your_stripe_secret_key_here
STRIPE_PUBLISHABLE_KEY=pk_test_your_stripe_publishable_key_here
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret_here

# Enable Stripe payment processing
ENABLE_STRIPE=true

# Stripe Price IDs for subscription tiers
# IMPORTANT: These must be PRICE IDs (start with price_) NOT Product IDs (prod_)
# Create these in Stripe Dashboard: Products > Create Product > Add Prices

# Academy Only Subscription ($29/mo or $240/yr)
STRIPE_PRICE_ACADEMY_MONTHLY=price_academy_monthly_REPLACE_ME
STRIPE_PRICE_ACADEMY_YEARLY=price_academy_yearly_REPLACE_ME

# Pro Plan - Full Platform ($49/mo or $408/yr)
STRIPE_PRICE_PRO_MONTHLY=price_pro_monthly_REPLACE_ME
STRIPE_PRICE_PRO_YEARLY=price_pro_yearly_REPLACE_ME

# Team Pro Plan - 2-5 Members ($99/mo or $828/yr)
STRIPE_PRICE_TEAM_PRO_MONTHLY=price_team_pro_monthly_REPLACE_ME
STRIPE_PRICE_TEAM_PRO_YEARLY=price_team_pro_yearly_REPLACE_ME

# Business Plan (Legacy/Optional)
STRIPE_PRICE_BUSINESS_MONTHLY=price_business_monthly_REPLACE_ME
STRIPE_PRICE_BUSINESS_YEARLY=price_business_yearly_REPLACE_ME

# Enterprise Plan ($299/mo or $2,999/yr)
STRIPE_PRICE_ENTERPRISE_MONTHLY=price_enterprise_monthly_REPLACE_ME
STRIPE_PRICE_ENTERPRISE_YEARLY=price_enterprise_yearly_REPLACE_ME

# Token Packages (one-time purchases)
STRIPE_PRICE_TOKENS_25=price_tokens_25_REPLACE_ME
STRIPE_PRICE_TOKENS_100=price_tokens_100_REPLACE_ME
STRIPE_PRICE_TOKENS_500=price_tokens_500_REPLACE_ME
STRIPE_PRICE_TOKENS_1000=price_tokens_1000_REPLACE_ME

# =======================
# AI API CONFIGURATION
# =======================
# OpenAI API (for AI prompt generation)
OPENAI_API_KEY=sk-your_openai_api_key_here

# Anthropic Claude API (alternative)
ANTHROPIC_API_KEY=sk-ant-your-anthropic-api-key-here

# =======================
# COST PROTECTION SETTINGS
# =======================
# Alert when user costs exceed this percentage of their payment (0.0 to 1.0)
MONTHLY_COST_ALERT_THRESHOLD=0.3

# Hard limit - suspend user when costs exceed this percentage (0.0 to 1.0)
MONTHLY_COST_HARD_LIMIT=0.7

# Minimum profit margin multiplier (revenue/cost ratio)
MINIMUM_PROFIT_MARGIN=3.0

# Token expiration in days (default: 90)
TOKEN_EXPIRY_DAYS=90

# =======================
# EMAIL CONFIGURATION
# =======================
# Email provider toggle: sendgrid or smtp
EMAIL_ENABLED=true
MAIL_PROVIDER=smtp

# --- SendGrid Configuration (Option 1)
# SENDGRID_API_KEY=SG.your-sendgrid-api-key-here

# --- SMTP Configuration (Option 2 - Zoho, Gmail, etc.)
# Zoho SMTP (US datacenter)
SMTP_HOST=smtp.zoho.com
SMTP_PORT=465
MAIL_SECURE=true

# For port 587 with STARTTLS:
# SMTP_PORT=587
# MAIL_SECURE=false

# --- Auth (use a Zoho App Password, NOT your login password)
SMTP_USER=noreply@smartpromptiq.com
SMTP_PASS=REPLACE_WITH_ZOHO_APP_PASSWORD

# --- From / branding
FROM_EMAIL=noreply@smartpromptiq.com
FROM_NAME=SmartPromptIQ
REPLY_TO=support@smartpromptiq.com
APP_NAME=SmartPromptIQ

# --- Optional TLS loosening for local dev behind proxies (keep true in prod)
SMTP_TLS_REJECT_UNAUTHORIZED=true

# --- Alternative providers examples:
# Gmail: SMTP_HOST=smtp.gmail.com, SMTP_PORT=587, MAIL_SECURE=false
# Outlook: SMTP_HOST=smtp.office365.com, SMTP_PORT=587, MAIL_SECURE=false
# SendGrid SMTP: SMTP_HOST=smtp.sendgrid.net, SMTP_PORT=587, MAIL_SECURE=false

# =======================
# RATE LIMITING
# =======================
# Enable rate limiting (true/false)
ENABLE_RATE_LIMITING=true

# Rate limit window in milliseconds (default: 15 minutes)
RATE_LIMIT_WINDOW_MS=900000

# Max requests per window per IP
RATE_LIMIT_MAX_REQUESTS=1000

# =======================
# SESSION CONFIGURATION
# =======================
SESSION_SECRET=your-session-secret-change-this-in-production

# =======================
# LOGGING AND MONITORING
# =======================
# Log level: error, warn, info, debug
LOG_LEVEL=info

# Sentry DSN for error tracking (optional)
# SENTRY_DSN=https://your-sentry-dsn-here

# =======================
# REDIS CONFIGURATION (Optional)
# =======================
# For session storage and caching (production recommended)
# REDIS_URL=redis://localhost:6379

# =======================
# SECURITY SETTINGS
# =======================
# Enable HTTPS in production
# SECURE_COOKIES=true
# TRUST_PROXY=true
# FORCE_HTTPS=false

# CORS origins (comma-separated for multiple origins)
# CORS_ORIGINS=http://localhost:5173,http://localhost:3000

# =======================
# ADMIN SETTINGS
# =======================
# Admin email for system alerts
ADMIN_EMAIL=admin@smartpromptiq.com

# Super admin user ID (for system operations)
# SUPER_ADMIN_ID=admin_user_id_here

# =======================
# FEATURE FLAGS
# =======================
# Enable/disable features
ENABLE_ANALYTICS=true
ENABLE_COST_PROTECTION=true
ENABLE_EMAIL_VERIFICATION=true
ENABLE_CAPTCHA=false

# Google reCAPTCHA (if enabled)
# RECAPTCHA_SITE_KEY=your_recaptcha_site_key
# RECAPTCHA_SECRET_KEY=your_recaptcha_secret_key